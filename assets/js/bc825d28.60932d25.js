"use strict";(self.webpackChunktienvx_blog=self.webpackChunktienvx_blog||[]).push([[5085],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var r=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){if(null==e)return{};var n,r,l=function(e,t){if(null==e)return{};var n,r,l={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=r.createContext({}),p=function(e){var t=r.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=p(e.components);return r.createElement(o.Provider,{value:t},e.children)},b="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,l=e.mdxType,a=e.originalType,o=e.parentName,s=u(e,["components","mdxType","originalType","parentName"]),b=p(n),m=l,d=b["".concat(o,".").concat(m)]||b[m]||c[m]||a;return n?r.createElement(d,i(i({ref:t},s),{},{components:n})):r.createElement(d,i({ref:t},s))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var a=n.length,i=new Array(a);i[0]=m;var u={};for(var o in t)hasOwnProperty.call(t,o)&&(u[o]=t[o]);u.originalType=e,u[b]="string"==typeof e?e:l,i[1]=u;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},9113:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>u,toc:()=>p});var r=n(7462),l=(n(7294),n(3905));const a={title:"Install bumblebee Ubuntu 16.04.1",authors:"tienvx",date:"2016-10-30"},i=void 0,u={permalink:"/2016/10/30/install-bumblebee-ubuntu-16-04-1",source:"@site/blog/2016-10-30-install-bumblebee-ubuntu-16-04-1.md",title:"Install bumblebee Ubuntu 16.04.1",description:"Update and install latest driver",date:"2016-10-30T00:00:00.000Z",formattedDate:"October 30, 2016",tags:[],readingTime:1.425,hasTruncateMarker:!1,authors:[{name:"Tien",title:"Contributor of Pact PHP",url:"https://github.com/tienvx",imageURL:"https://github.com/tienvx.png",key:"tienvx"}],frontMatter:{title:"Install bumblebee Ubuntu 16.04.1",authors:"tienvx",date:"2016-10-30"},prevItem:{title:"Install bumblebee on Ubuntu 16.10",permalink:"/2016/10/31/install-bumblebee-on-ubuntu-16-10"},nextItem:{title:"Use fcitx in hipchat on ubuntu",permalink:"/2016/10/30/use-fcitx-in-hipchat-on-ubuntu"}},o={authorsImageUrls:[void 0]},p=[],s={toc:p},b="wrapper";function c(e){let{components:t,...n}=e;return(0,l.kt)(b,(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Update and install latest driver"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo apt-add-repository ppa:graphics-drivers/ppa\nsudo apt-get update && sudo apt-get dist-upgrade\nsudo apt install nvidia-prime nvidia-370\n")),(0,l.kt)("p",null,"Reboot Switch to intel card"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo prime-select intel\n")),(0,l.kt)("p",null,"Install bumblebee testing with primus"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo add-apt-repository ppa:bumblebee/testing\nsudo apt update\nsudo apt-get install bumblebee bumblebee-nvidia primus nvidia-settings nvidia-370\n")),(0,l.kt)("p",null,"Add kernel modules to load at boot time"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo gedit /etc/modules i915 bbswitch\n")),(0,l.kt)("p",null,"Blacklist nvidia"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo gedit /etc/modprobe.d/bumblebee.conf # 370 blacklist nvidia-370 blacklist nvidia-370-updates blacklist nvidia-experimental-370\n")),(0,l.kt)("p",null,"Configure bumblebee"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo gedit /etc/bumblebee/bumblebee.conf nvidia-current -> nvidia-370 Driver=nvidia\n")),(0,l.kt)("p",null,"Add user to bumblebee group, enable bumblebeed daemon service."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo gpasswd -a $USER bumblebee\nsudo systemctl enable bumblebeed\n")),(0,l.kt)("p",null,"Add boot flags (depend on each machine, my laptop is):"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'sudo gedit /etc/default/grub\nGRUB_CMDLINE_LINUX_DEFAULT="quiet splash nouveau.modeset=0 acpi_osi=! acpi_osi=\\"Windows 2009\\" acpi_backlight=native idle=nomwait"\nsudo update grub2\n')),(0,l.kt)("p",null,"Reboot Check if bumblebee working"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo apt-get install mesa-utils primusrun glxinfo | grep OpenGL lsmod | grep bbswitch\ncat /proc/acpi/bbswitch\nprimusrun glxgears\ncat /proc/acpi/bbswitch\n")),(0,l.kt)("p",null,"There is a bug that prevent to run steam's games using bumblebee, here is how to fix:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"sudo apt-get install lib32stdc++6\ncd ~/.steam/ubuntu12_32/steam-runtime/i386/usr/lib/i386-linux-gnu\nmv libstdc++.so.6 ~/backup/32\nln -fs /usr/lib32/libstdc++.so.6 libstdc++.so.6\ncd ~/.steam/ubuntu12_32/steam-runtime/amd64/usr/lib/x86_64-linux-gnu\nmv libstdc++.so.6 ~/backup/64\nln -fs /usr/lib32/libstdc++.so.6 libstdc++.so.6\n")),(0,l.kt)("p",null,"Open games in steam: open steam -> libraries -> right click a game -> properties -> set launch options ",(0,l.kt)("inlineCode",{parentName:"p"},"primusrun %command%")),(0,l.kt)("p",null,"Useful commands:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"lspci | egrep 'VGA|3D' lsmod | grep bbswitch dmesg | grep bbswitch dpkg -l | grep bumblebee\nlsmod | grep nvidia\noptirun -b none\n/usr/bin/nvidia-settings -c :8\n")),(0,l.kt)("p",null,"Sources:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://www.webupd8.org/2016/08/how-to-install-and-configure-bumblebee.html"},"How to install and configure bumblebee")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://rajat-osgyan.blogspot.com/2016/04/how-to-install-latest-nvidia-drivers-on.html"},"Bumblebee on ubuntu 16.04")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://rajat-osgyan.blogspot.com/2016/07/bumblebee-on-ubuntu-1604-revised.html"},"Bumblebee on ubuntu 16.04 revised")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"http://lenovolinux.blogspot.com/2016/05/bumblebee-on-lenovo-t440p-nvidia-gt.html"},"Bumblebee on Lenovo T440p Ubuntu 16.04"))))}c.isMDXComponent=!0}}]);